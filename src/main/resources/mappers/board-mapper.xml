<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="Board">
	<resultMap type="Board" id="resultBoard">
		<id column="FREENO" property="boardNo"/>
		<result column="FREETITLE" property="boardTitle"/>
		<result column="FREECONTENT" property="boardContent"/>
		<result column="FREEDATE" property="boardDate"/>
		<result column="FREECNT" property="boardCnt"/>
		<result column="ID" property="boardId"/>
	</resultMap>
		
	<!-- 게시글 목록 -->
	<select id="listCount" resultType="int">
		SELECT count(*) FROM BULLETINEBOARD
	</select>
	
	<!-- 게시글 상세보기 -->
	<select id="detail" resultMap="resultBoard" parameterType="int">
		SELECT * FROM BULLETINEBOARD WHERE FREENO = #{FREENO} 
	</select>
	
	<!-- 게시글 등록 -->
 	<insert id="insertBoard" parameterType="Board" flushCache="true" statementType="PREPARED">
		INSERT INTO BULLETINEBOARD(FREENO, FREETITLE, FREECONTENT, FREEDATE, FREECNT, ID)
		VALUES(SEQ_BULLETINEBOARD.NEXTVAL, #{boardTitle}, #{boardContent}, SYSDATE, 0, #{boardId})
	</insert>
	
	<!-- 게시글 삭제 -->
	<delete id="deleteBoard" parameterType="Board" flushCache="true" statementType="PREPARED">
		DELETE FROM BULLETINEBOARD WHERE FREENO = #{boardNo}
	</delete>
	
	

	
	<!-- 페이지당 게시글 조회 -->
	<select id="selectList" resultMap="resultBoard" >
		SELECT * FROM BULLETINEBOARD
	</select>
	
	<!-- 게시글 단일 조회 -->
	<select id="selectOne" parameterType="string" resultType="Board">
		SELECT * FROM BULLETINEBOARD WHERE BOARD_NUM = #{board_num}
	</select>
	
	<!-- 검색한 게시글 조회 -->
	<select id="searchList" parameterType="string" resultType="arraylist" resultMap="resultBoard">
		SELECT * FROM BULLETINEBOARD WHERE BOARD_TITLE LIKE '%'|| #{keyword} ||'%' OR BOARD_CONTENT LIKE '%'|| #{keyword} ||'%'
		ORDER BY REGDATE DESC
	</select>
	
	<!-- 게시글 조회 수 증가 -->
	<update id="addReadCount" parameterType="string" flushCache="true" statementType="PREPARED">
		UPDATE BULLETINEBOARD SET READ_COUNT = READ_COUNT+1 WHERE BOARD_NUM = #{board_num}
	</update>
	
	<!-- 게시글 수정 -->
	<update id="updateBoard" parameterType="Board" flushCache="true" statementType="PREPARED">
		UPDATE BULLETINEBOARD SET BOARD_TITLE = #{board_title}, BOARD_CONTENT = #{board_content}, BOARD_FILE = #{board_file} WHERE BOARD_NUM = #{board_num} AND BOARD_PWD = #{board_pwd}
	</update>
	

	
	<!-- 게시글 신고 -->
	<!-- 좋아요 -->
	
</mapper>
