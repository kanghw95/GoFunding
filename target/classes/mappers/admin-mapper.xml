<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="Admin">
	<resultMap type="User" id="resultUser">
		<id property="userId" column="id"/>
		<result property="userName" column="name"/>
		<result property="userNick" column="nickname"/>
		<result property="userPhone" column="phone"/>
		<result property="gender" column="gender"/>
		<result property="userAge" column="age"/>
		<result property="point" column="point"/>
		<result property="reportCnt" column="reportcnt"/>
		<result property="userNo" column="userno"/>
	</resultMap>
	
	<!-- 페이징 + 사용자 조회 -->
	<select id="selectUser" resultType="arraylist" resultMap="resultUser">
		SELECT * FROM (SELECT ID, NAME, NICKNAME, PHONE, GENDER, AGE, POINT, REPORTCNT, USERNO
		, ROW_NUMBER() OVER (ORDER BY USERNO ASC) AS RNUM FROM USERS) MP
		WHERE RNUM BETWEEN #{rowStart} AND #{rowEnd}
		ORDER BY USERNO ASC
	</select>
	
	<!-- 사용자 수 조회 -->
	<select id="countUser" resultType="int">
		SELECT COUNT(*) FROM USERS
	</select>
	
	<select id="searchId" resultType="arraylist" resultMap="resultUser">
		SELECT * FROM USERS WHERE ID LIKE #{userId} ORDER BY USERNO ASC
	</select>
	
	<select id="searchName" resultType="arraylist" resultMap="resultUser">
		SELECT * FROM USERS WHERE NAME LIKE #{userName} ORDER BY USERNO ASC
	</select>
	
	<select id="searchNick" resultType="arraylist" resultMap="resultUser">
		SELECT * FROM USERS WHERE NICKNAME LIKE #{userNick} ORDER BY USERNO ASC
	</select>
	
	<delete id="deleteUser">
		DELETE FROM USERS WHERE USERNO = #{userNo}
	</delete>
</mapper>
